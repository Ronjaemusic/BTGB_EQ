<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BTGB Emotional Intelligence Scorecard</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f8;
      padding: 20px;
      margin: 0;
    }
    #container {
      max-width: 780px;
      margin: auto;
      background: white;
      padding: 25px;
      border-left: 6px solid #2e7d32;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1, h2, h3 {
      color: #2e7d32;
    }
    .hidden {
      display: none;
    }
    .progress-bar {
      height: 20px;
      background: #c8e6c9;
      border-radius: 10px;
      margin-bottom: 20px;
      position: relative;
    }
    .progress-bar-fill {
      height: 100%;
      width: 0%;
      background: #2e7d32;
      transition: width 0.3s ease;
      border-radius: 10px;
    }
    .progress-label {
      position: absolute;
      width: 100%;
      text-align: center;
      top: 0;
      font-size: 0.9em;
      color: #1b5e20;
    }
    .question-block {
      display: none;
    }
    .question-block.active {
      display: block;
    }
    .radio-group {
      margin: 15px 0;
    }
    .radio-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.85em;
      color: #555;
      margin-top: -10px;
    }
    .navigation {
      margin-top: 20px;
    }
    .navigation button {
      padding: 10px 20px;
      background-color: #2e7d32;
      color: white;
      border: none;
      cursor: pointer;
      margin-right: 10px;
    }
    #results {
      display: none;
      margin-top: 30px;
    }
    .section-header {
      font-size: 1.2em;
      color: #1b5e20;
      margin-bottom: 10px;
    }
    input[type="text"] {
      padding: 6px;
      font-size: 1em;
      width: 45%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="introScreen">
      <h1>BTGB Emotional Intelligence Scorecard</h1>
      <p>Please enter your name to begin.</p>
      <label>First Name: <input type="text" id="firstName" /></label><br />
      <label>Last Name: <input type="text" id="lastName" /></label><br /><br />
      <button onclick="startAssessment()">Start Assessment</button>
    </div>

    <div id="assessmentScreen" class="hidden">
      <div class="progress-bar">
        <div class="progress-bar-fill" id="progressFill"></div>
        <div class="progress-label" id="progressText">0%</div>
      </div>
      <div id="questionsContainer"></div>
      <div class="radio-labels">
        <span>1 - Not at all</span>
        <span>2</span>
        <span>3</span>
        <span>4</span>
        <span>5 - Always true</span>
      </div>
      <div class="navigation">
        <button onclick="prevQuestion()">Previous</button>
        <button onclick="nextQuestion()">Next</button>
        <button id="submitResults" onclick="calculateScore()" style="display:none;">Submit</button>
      </div>
    </div>

    <div id="results">
      <h2 id="namedHeader"></h2>
      <p><strong>Self-Awareness:</strong> <span id="saScore"></span> / 30 â€“ <span id="saColor"></span></p>
      <p><strong>Self-Management:</strong> <span id="smScore"></span> / 30 â€“ <span id="smColor"></span></p>
      <p><strong>Social Awareness:</strong> <span id="soScore"></span> / 30 â€“ <span id="soColor"></span></p>
      <p><strong>Relationship Mgmt:</strong> <span id="rmScore"></span> / 30 â€“ <span id="rmColor"></span></p>
      <p><strong>Total Score:</strong> <span id="totalScore"></span> / 120</p>
      <button onclick="window.print()">Download as PDF</button>
    </div>
  </div>

  <script>
    const questions = [
      "I can name what Iâ€™m feeling without blaming others.",
      "I notice physical signs of my emotions (tight chest, shallow breath).",
      "I reflect on how my past shapes my reactions.",
      "I can spot when Iâ€™m emotionally triggered.",
      "I understand how my emotions affect my decisions.",
      "I recognize patterns in how I respond to stress.",
      "I pause and breathe before responding under pressure.",
      "I donâ€™t let a bad moment ruin my entire day.",
      "I stick to my values even when itâ€™s inconvenient.",
      "I can pivot calmly when plans change.",
      "I know when to speak and when to be silent.",
      "I manage my impulses during conflict.",
      "I pick up on body language shifts quickly.",
      "I notice when someone is withdrawn or quiet.",
      "I can sense tension before it becomes conflict.",
      "I listen to learn, not just to speak.",
      "I consider how others may feel before I act.",
      "I understand cultural differences and adjust respectfully.",
      "I give clear, respectful feedback even when itâ€™s hard.",
      "I know how to calm things down during team conflict.",
      "I build trust by being consistent in my actions.",
      "I take time to understand what motivates others.",
      "I celebrate people publicly and correct privately.",
      "I repair relationships after misunderstandings."
    ];

    const sectionTitles = ["Self-Awareness", "Self-Management", "Social Awareness", "Relationship Management"];
    let currentIndex = 0;

    function startAssessment() {
      document.getElementById("introScreen").classList.add("hidden");
      document.getElementById("assessmentScreen").classList.remove("hidden");
      buildQuestions();
      showQuestion(currentIndex);
    }

    function buildQuestions() {
      const container = document.getElementById('questionsContainer');
      questions.forEach((q, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        if (i === 0) block.classList.add('active');
        const section = Math.floor(i / 6);
        const sectionHeader = (i % 6 === 0) ? `<h3 class='section-header'>${sectionTitles[section]}</h3>` : "";
        block.innerHTML = sectionHeader + `
          <h2>Question ${i + 1} of ${questions.length}</h2>
          <p>${q}</p>
          <div class="radio-group">
            ${[1,2,3,4,5].map(n => `
              <label><input type="radio" name="q${i}" value="${n}"> ${n}</label>
            `).join('')}
          </div>
        `;
        container.appendChild(block);
      });
    }

    function showQuestion(index) {
      const blocks = document.querySelectorAll('.question-block');
      blocks.forEach((b, i) => {
        b.classList.toggle('active', i === index);
      });
      document.getElementById('submitResults').style.display = (index === questions.length - 1) ? 'inline-block' : 'none';
      const percent = Math.round(((index + 1) / questions.length) * 100);
      document.getElementById("progressFill").style.width = percent + "%";
      document.getElementById("progressText").textContent = percent + "%";
    }

    function nextQuestion() {
      const radios = document.querySelectorAll(`input[name="q${currentIndex}"]`);
      if (![...radios].some(r => r.checked)) {
        alert("Please select a rating before continuing.");
        return;
      }
      if (currentIndex < questions.length - 1) {
        currentIndex++;
        showQuestion(currentIndex);
      }
    }

    function prevQuestion() {
      if (currentIndex > 0) {
        currentIndex--;
        showQuestion(currentIndex);
      }
    }

    function getColorDot(score) {
      if (score >= 25) return "ðŸŸ¢ Strength Zone";
      if (score >= 15) return "ðŸŸ¡ Growth Zone";
      return "ðŸ”´ Needs Support";
    }

    function calculateScore() {
      let sa = 0, sm = 0, so = 0, rm = 0;
      for (let i = 0; i < 24; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected) {
          const val = parseInt(selected.value);
          if (i < 6) sa += val;
          else if (i < 12) sm += val;
          else if (i < 18) so += val;
          else rm += val;
        }
      }
      const total = sa + sm + so + rm;
      document.getElementById('saScore').textContent = sa;
      document.getElementById('smScore').textContent = sm;
      document.getElementById('soScore').textContent = so;
      document.getElementById('rmScore').textContent = rm;
      document.getElementById('totalScore').textContent = total;
      document.getElementById('saColor').textContent = getColorDot(sa);
      document.getElementById('smColor').textContent = getColorDot(sm);
      document.getElementById('soColor').textContent = getColorDot(so);
      document.getElementById('rmColor').textContent = getColorDot(rm);

      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const today = new Date().toLocaleDateString();
      document.getElementById('namedHeader').textContent = 
        `BTGB Emotional Intelligence Scorecard for ${firstName} ${lastName} â€“ Completed on ${today}`;

      document.getElementById('results').style.display = 'block';
      document.getElementById('assessmentScreen').classList.add('hidden');
      window.scrollTo(0, document.body.scrollHeight);
    }
  </script>
</body>
</html>
